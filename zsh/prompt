# vim:syntax=sh

# expand functions in the prompt
setopt prompt_subst

#This is a special function that gets called before each prompt is displayed
function precmd {
    set_iterm2_tab_name
    PROMPT="$(user_name)$(current_working_directory)$(colorized_rvm_prompt)$(colorized_vcprompt)"
}

function user_name {
    echo "%{$fg[red]%}%n:%{$reset_color%}"
}

function current_working_directory {
    echo "%{$fg[magenta]%}[%~]%{$reset_color%}"
}

function colorized_vcprompt {
    echo "%{$fg[cyan]%}$(vcprompt)%{$reset_color%}"
}

function colorized_rvm_prompt {
    echo "%{$fg[green]%}[$(rbenv version-name)]%{$reset_color%}"
}

function set_iterm2_tab_name {
    echo -ne "\\033]0;${PWD##*/}\\007"
}
